//
//  SwiftClassModel.swift
//  SwiftAndOCDemo
//
//  Created by 北京叩富网络科技有限公司 on 2019/6/25.
//  Copyright © 2019 北京叩富网络科技有限公司-ZPP. All rights reserved.
//

import UIKit
import SigmaSwiftStatistics
@objcMembers class SwiftClassModel: NSObject {
    
    let using: String = "哈哈哈哈哈"
    
func mySwiftFun(name: String) -> Void {
        print(name + using)
//        swiftDiaoyongOC()
    }
    
    
    func swiftDiaoyongOC() -> Void {
        let ocModel: OCClassModel = OCClassModel.init()
        ocModel.transValue { (arg,zidian) in
            
            print("我是oc的block传递过来的值\(arg)")
            print("---------------------")
            print(zidian)
        }
    }
    
    class func detectCheat(hr1: Array<Double> ,hr2: Array<Double>) -> Int {
//        let hr1 = [98.0, 98.0, 97.0, 96.0, 94.0, 94.0, 94.0, 94.0, 94.0, 94.0, 93.0, 93.0, 93.0, 92.0, 92.0, 91.0, 90.0, 88.0, 88.0, 87.0, 86.0, 85.0, 84.0, 84.0, 85.0, 85.0, 85.0, 84.0, 84.0, 84.0, 84.0, 84.0, 84.0, 85.0, 85.0, 86.0, 88.0, 89.0, 90.0, 91.0, 91.0, 92.0, 92.0, 92.0, 93.0, 93.0, 93.0, 93.0, 92.0, 92.0, 91.0, 92.0, 92.0, 92.0, 93.0, 93.0, 93.0, 94.0, 94.0, 95.0, 96.0, 97.0, 98.0, 98.0, 99.0, 140.0, 139.0, 139.0, 139.0, 142.0, 142.0, 141.0, 141.0, 141.0, 141.0, 141.0, 140.0, 140.0, 139.0, 140.0, 139.0, 139.0, 139.0, 138.0, 140.0, 140.0, 140.0, 139.0, 140.0, 140.0, 141.0, 141.0, 141.0, 140.0, 140.0, 139.0, 139.0, 138.0, 138.0, 138.0, 137.0, 139.0, 139.0, 140.0, 140.0, 140.0, 140.0, 141.0, 141.0, 140.0, 140.0, 140.0, 139.0, 140.0, 140.0, 140.0, 140.0, 140.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 140.0, 140.0, 140.0, 140.0, 140.0, 141.0, 141.0, 140.0, 142.0, 142.0, 144.0, 144.0, 143.0, 143.0, 143.0, 142.0, 142.0, 142.0, 142.0, 142.0, 142.0, 142.0, 142.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 140.0, 140.0, 140.0, 140.0, 140.0, 141.0, 142.0, 142.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 143.0, 142.0, 142.0, 142.0, 142.0, 141.0, 141.0, 141.0, 140.0, 142.0, 141.0, 141.0, 145.0, 146.0, 145.0, 145.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 150.0, 150.0, 149.0, 149.0, 149.0, 151.0, 150.0, 150.0, 149.0, 149.0, 149.0, 148.0, 148.0, 148.0, 148.0, 148.0, 147.0, 147.0, 147.0, 147.0, 147.0, 149.0, 149.0, 148.0, 148.0, 147.0, 147.0, 147.0, 147.0, 147.0, 147.0, 147.0, 147.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 151.0, 150.0, 152.0, 152.0, 151.0, 152.0, 152.0, 152.0, 152.0, 151.0, 150.0, 150.0, 151.0, 150.0, 150.0, 150.0, 149.0, 149.0, 151.0, 152.0, 155.0, 154.0, 154.0, 154.0, 153.0, 153.0, 153.0, 153.0, 153.0, 154.0, 153.0, 153.0, 153.0, 153.0, 153.0, 152.0, 152.0, 152.0, 151.0, 152.0, 131.0, 131.0, 130.0, 130.0, 130.0, 131.0, 132.0, 132.0, 131.0, 132.0, 133.0, 134.0, 134.0, 133.0, 134.0, 134.0, 135.0, 136.0, 135.0, 136.0, 137.0, 138.0, 138.0, 137.0, 135.0]
//
//        let hr2 = [99.0, 98.0, 97.0, 94.0, 93.0, 93.0, 93.0, 93.0, 93.0, 93.0, 92.0, 91.0, 88.0, 87.0, 86.0, 85.0, 85.0, 84.0, 84.0, 83.0, 83.0, 83.0, 83.0, 83.0, 82.0, 84.0, 84.0, 85.0, 85.0, 87.0, 88.0, 89.0, 90.0, 90.0, 90.0, 89.0, 90.0, 91.0, 92.0, 92.0, 92.0, 93.0, 93.0, 92.0, 91.0, 91.0, 90.0, 90.0, 90.0, 89.0, 89.0, 90.0, 90.0, 90.0, 91.0, 92.0, 92.0, 92.0, 93.0, 94.0, 95.0, 96.0, 97.0, 98.0, 98.0, 140.0, 141.0, 140.0, 139.0, 143.0, 143.0, 142.0, 142.0, 142.0, 142.0, 142.0, 141.0, 141.0, 140.0, 141.0, 140.0, 140.0, 140.0, 140.0, 140.0, 140.0, 141.0, 140.0, 139.0, 140.0, 140.0, 139.0, 139.0, 138.0, 138.0, 138.0, 137.0, 137.0, 137.0, 137.0, 137.0, 136.0, 136.0, 136.0, 136.0, 136.0, 136.0, 136.0, 136.0, 136.0, 135.0, 140.0, 139.0, 140.0, 140.0, 139.0, 139.0, 140.0, 140.0, 141.0, 141.0, 140.0, 140.0, 141.0, 141.0, 141.0, 141.0, 141.0, 145.0, 144.0, 144.0, 143.0, 145.0, 145.0, 146.0, 145.0, 145.0, 144.0, 144.0, 143.0, 143.0, 143.0, 143.0, 142.0, 142.0, 142.0, 142.0, 142.0, 142.0, 142.0, 141.0, 141.0, 141.0, 141.0, 141.0, 142.0, 142.0, 142.0, 142.0, 145.0, 144.0, 143.0, 143.0, 143.0, 142.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 144.0, 144.0, 144.0, 143.0, 146.0, 145.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 149.0, 151.0, 151.0, 150.0, 150.0, 149.0, 149.0, 149.0, 148.0, 148.0, 148.0, 148.0, 148.0, 148.0, 147.0, 147.0, 147.0, 147.0, 147.0, 147.0, 147.0, 147.0, 147.0, 147.0, 147.0, 147.0, 147.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 146.0, 147.0, 147.0, 148.0, 148.0, 150.0, 150.0, 149.0, 149.0, 149.0, 148.0, 148.0, 148.0, 148.0, 148.0, 148.0, 151.0, 151.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 151.0, 132.0, 131.0, 131.0, 130.0, 129.0, 128.0, 127.0, 126.0, 126.0, 127.0, 126.0, 125.0, 124.0, 122.0, 121.0, 120.0, 120.0, 119.0, 119.0, 118.0, 116.0, 117.0, 117.0, 117.0, 117.0]
        
        // 计算pearson
        let pearson = Sigma.pearson(x: hr1, y: hr2) ?? -1
        print("pearson",pearson)
        
        // 计算绝对差
        var diffArray = Array<Double>()
        for (index, value) in hr1.enumerated() {
            if index >= hr2.count {
                break
            }
            if value >= hr2[index] {
                diffArray.append(value-hr2[index])
            }else{
                diffArray.append(hr2[index]-value)
            }
        }
        // 计算绝对差中位数
        let medium_diff = Sigma.median(diffArray) ?? -1
        
        print("medium_diff",medium_diff)
        
        if pearson == -1 || medium_diff == -1 {
            print("数据错误")
            return -1;
        }else if pearson > 0.9 && medium_diff < 10 {
            print("结论：极有可能为作弊情况")
            return 1;
        }else{
            print("结论：非作弊情况")
            return 0;
        }
    }
}
